<!-- My Work Space -->
<!-- taken from https://facebook.github.io/react/docs/installation.html -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.34/browser.js"></script>
        <script src="https://unpkg.com/react@15/dist/react.js"></script>
        <script src="https://unpkg.com/react-dom@15/dist/react-dom.js"></script>
        <!-- Visibility mixin https://github.com/Pomax/react-component-visibility -->
         <script src="../node_modules/react-component-visibility/index.js"></script> 
<script type="text/babel">
 var MyCollaborationsgroup = React.createClass({    
             rendercollaborationssubgroup() {
                var feeds = this.props.appitem.feeds;
                var properties = Object.keys(feeds).map((k, idx) => {
               return (
                    <MyCollaborationssubgroup appfeeditem={feeds[k]} key={idx} />
                    );
            });
            return  properties
                                                                                                            
                },   
                render() {
                return (<div className="col-md-4 col-sm-4 col-xs-6">
                  <div className="stdbox">
                    <div className="stdbar">&nbsp;</div>
                    <div className="stdiconbox">
                      <div className="stdicon">{this.props.appitem.Name}</div>
                    </div>
                    <h3 className="stdtitle">
                      <a href="9_division_infantry.html">{this.props.appitem.Name}</a>
                      <div className="createdby"> {this.props.appitem.createdby}</div>
                    </h3>
                    <div className="mycollaborationsgroup">
                      <div className="mycollaborationssubgroup"> 
                          {this.rendercollaborationssubgroup()}
                      </div>
                    </div>
                  </div>
                </div>);
                }
            });

            var MyCollaborationssubgroup = React.createClass({   
                  render() {
                      return (<div className="item">
                          <div className="leftcol">
                            <a><img src='#'/></a>
                          </div>
                          <div className="rightcol">
                            <h5 className="shorttitle">{this.props.appfeeditem.title}</h5>
                            <p className="timeago">{this.props.appfeeditem.timeago}</p>
                          </div>
                        </div>);
                }
            });

var MyCollaborations = React.createClass({  
                mixins : [
                    //required
                    ComponentVisibilityMixin
                ],
                getInitialState() {
                    // returning sample data before the actual is retrieved via fetch
                    return {
                        promodata:[{"Sites": [
        {
            "Name": "9th Division/Infantry",
            "Type": "Site",
            "createdby": "created by 9th Division/Infantry",
            "feeds": [
                {
                    "Title": "Laura uploaded   ",
                    "timeago": "0 min ago",
                    "imgsrc":"/Style%20Library/mindef/img/face_3.jpg"
                },
                {
                    "Title": "Lisa uploaded    ",
                    "timeago": "0 min ago",
                    "imgsrc":"/Style%20Library/mindef/img/face_1.jpg"
                },
                {
                    "Title": "Steven Modified   ",
                    "timeago": "30 min ago",
                    "imgsrc":"/Style%20Library/mindef/img/face_2.jpg"
                } 
            ] 
        },
        {
            "Name": "Finance",
            "Type": "CoP",
            "createdby": "created by Defence Finance Organisation",
            "feeds": [
                {
                    "Title": "Laura uploaded   ",
                    "timeago": "0 min ago",
                    "imgsrc":"/Style%20Library/mindef/img/face_3.jpg"
                },
                {
                    "Title": "Lisa uploaded    ",
                    "timeago": "0 min ago",
                    "imgsrc":"/Style%20Library/mindef/img/face_1.jpg"
                },
                {
                    "Title": "Steven Modified   ",
                    "timeago": "30 min ago",
                    "imgsrc":"/Style%20Library/mindef/img/face_2.jpg"
                } 
            ] 
        },
        {
            "Name": "MINDEF Intranet Revamp",
            "Type": "PROJECT",
            "createdby": "created by MIWG",
            "feeds": [
                {
                    "Title": "Laura uploaded   ",
                    "timeago": "0 min ago",
                    "imgsrc":"/Style%20Library/mindef/img/face_3.jpg"
                },
                {
                    "Title": "Lisa uploaded    ",
                    "timeago": "0 min ago",
                    "imgsrc":"/Style%20Library/mindef/img/face_1.jpg"
                },
                {
                    "Title": "Steven Modified   ",
                    "timeago": "30 min ago",
                    "imgsrc":"/Style%20Library/mindef/img/face_2.jpg"
                } 
            ] 
        },
        {
            "Name": "SAF Day Parade 2017",
            "Type": "PROJECT",
            "createdby": "created by JOINT",
            "feeds": [
                {
                    "Title": "Laura uploaded   ",
                    "timeago": "0 min ago",
                    "imgsrc":"/Style%20Library/mindef/img/face_3.jpg"
                },
                {
                    "Title": "Lisa uploaded    ",
                    "timeago": "0 min ago",
                    "imgsrc":"/Style%20Library/mindef/img/face_1.jpg"
                },
                {
                    "Title": "Steven Modified   ",
                    "timeago": "30 min ago",
                    "imgsrc":"/Style%20Library/mindef/img/face_2.jpg"
                } 
            ] 
        },
        {
            "Name": "Joint Trip Budgetary Report",
            "Type": "AD-HOC",
            "createdby": "created by Tan Kah Kee",
            "feeds": [
                {
                    "Title": "Laura uploaded   ",
                    "timeago": "0 min ago",
                    "imgsrc":"/Style%20Library/mindef/img/face_3.jpg"
                },
                {
                    "Title": "Lisa uploaded    ",
                    "timeago": "0 min ago",
                    "imgsrc":"/Style%20Library/mindef/img/face_1.jpg"
                },
                {
                    "Title": "Steven Modified   ",
                    "timeago": "30 min ago",
                    "imgsrc":"/Style%20Library/mindef/img/face_2.jpg"
                } 
            ] 
        }
    ]
}
]
 }
                },                            
                retrieveFromWebService() {                    
                    var that = this;
                    var url = 'MyWorkSpace.json';
                    fetch(url)
                    .then(function(response) {
                        if (response.status >= 400) {
                            throw new Error("Bad response from server");
                        }              
                        return response.json();
                    })
                    .then(function(data) {   
                    that.setState({ promodata: data});                        
                    });
                },                 
                componentVisibilityChanged() {
                    console.log('scroll into view');
                    this.retrieveFromWebService();
                    // once we get the value once, we don't need to use this anymore
                    this.disableVisibilityHandling();
                }, 
                  
                rendercollaborationsgroup() {
                    
            var Sites = this.state.promodata[0].Sites;
           
            var properties = Object.keys(Sites).map((k, idx) => {
               return (
                    <MyCollaborationsgroup appitem={Sites[k]} key={idx} />
                    );
            });
            return  properties              
                                  
                },        
                 render() {
                     return (<div className="col-md-12">
                <div className="headingtitlebox">
                  <h2 className="headingtitle">
                    My Work Space
                  </h2>
                  <div className="all">
                      <a href="collaborations.html">ALL</a>
                      </div>
                </div>
               <div className="mycollaborationsbox multiple-items">
                      {this.rendercollaborationsgroup()}
                     </div>
                      </div>);
                 }
            });

 
ReactDOM.render(<MyCollaborations />, document.getElementById('mycollaborations'));
</script>
            <div className="row" id="mycollaborations" >
                         
                
              </div>
            
              <style>
                .mycollaborationsbox {
                  display: inline-block !important;
                  width: 100%;
                  padding-left:10px;
                  padding-right:10px;
                }
                @media (max-width: 699px) {
                  .mycollaborationsbox {
                    padding-left:0px;
                    padding-right:0px;
                  }
                }
                .mycollaborationsbox [class*="col-"] {
                  max-width: none;
                }
                .mycollaborationsbox .slick-prev, .mycollaborationsbox .slick-next {
                  height: 100px;
                  width: 20px;
                  /*border: 1px solid #999999;*/
                  z-index: 2;
                }
                .mycollaborationsbox .slick-prev {
                  left: -3px;
                }
                .mycollaborationsbox .slick-next {
                  right: -3px;
                }
                @media (max-width: 699px) {
                  .mycollaborationsbox .slick-prev {
                    left: 0px;
                  }
                  .mycollaborationsbox .slick-next {
                    right: 0px;
                  }
                }
                .mycollaborationsbox .slick-prev:hover, .mycollaborationsbox .slick-next:hover {
                  background-color: #EEEEEE;
                }
                .mycollaborationsbox .slick-prev:before, .mycollaborationsbox .slick-next:before {
                  color: #808080;
                  font-family: 'Glyphicons Halflings';
                  font-size: 20px;
                }
                .mycollaborationsbox .slick-prev:before, .mycollaborationsbox .slick-next:before {
                  content: "\e079";
                }
                .mycollaborationsbox .slick-next:before, .mycollaborationsbox .slick-next:before {
                  content: "\e080";
                }
                .mycollaborationsbox .slick-prev:before {
                  margin-left: 0px;
                }
                .mycollaborationsbox .slick-next:before {
                  margin-right: 0px;
                }
              </style>
            
          
